language: java
jdk:
  - oraclejdk8
sudo: true # Required or unit tests seems to fail for some reason?
before_install: # Travis kills builds using over 3GB of memory - need to conserve!
 - export GRADLE_OPTS="-Xmx128m"
 - sudo ./.travis/fix-memory.sh
 - ./.travis/debug-memory.sh &
script:
 - sudo cgexec -g memory:memlimit ./gradlew check
after_success:
 - ./gradlew jacocoTestReport
 - bash <(curl -s https://codecov.io/bash)
 - ./gradlew coveralls
cache:
  directories: # Speed up dependency resolution
  - $HOME/.m2
  - $HOME/.gradle
  - $HOME/.embedmongo
