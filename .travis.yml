language: java
jdk:
  - oraclejdk8
sudo: true # Required or unit tests seems to fail for some reason?
before_install: # Travis kills builds using over 3GB of memory - need to conserve!
 - export GRADLE_OPTS="-Xmx128m"
 - top -b -n 1
 - sudo /etc/init.d/mysql stop || true
 - sudo /etc/init.d/postgresql stop || true
 - sudo service postgresql stop || true
 - sudo service mysql stop || true
 - sudo service memcached stop || true
 - sudo service bootlogd stop || true
 - sudo service elasticsearch stop || true
 - sudo service mongodb stop || true
 - sudo service neo4j stop || true
 - sudo service cassandra stop || true
 - sudo service riak stop || true
 - sudo service rsync stop || true
 - sudo service x11-common stop || true
 - ls -al /var/ramfs
 - fallocate -l 2048M $HOME/swapfile
 - mkswap $HOME/swapfile
 - sudo swapon $HOME/swapfile
 - /bin/sync
 - top -b -n 1
after_success:
 - ./gradlew jacocoTestReport
 - bash <(curl -s https://codecov.io/bash)
 - ./gradlew coveralls
cache:
  directories: # Speed up dependency resolution
  - $HOME/.m2
  - $HOME/.gradle
  - $HOME/.embedmongo
